---
title: Credit System
description: How Layers credits work - pricing, tiers, and usage tracking
---

# Credit System

Layers uses a unified credit system that works across all AI providers. Credits abstract away the complexity of different pricing models and give you a single balance to manage.

<Callout type="info">
For complete billing documentation including Stripe integration, margins, and pricing sync, see [Billing & Credits](/docs/billing).
</Callout>

## How Credits Work

**1 credit = $0.01 worth of AI usage + margin**

When you use any AI model through Layers:

1. We calculate the raw cost based on tokens used
2. Apply a margin (default 60%)
3. Deduct credits from your balance

### Formula

```
credits = (cost_usd / $0.01) × (1 + margin_percent / 100)
```

**Example:** Claude Sonnet request costing $0.03:
```
credits = ($0.03 / $0.01) × 1.60 = 4.8 credits
```

## Subscription Tiers

| Tier | Price | Monthly Credits | Overage | Rate |
|------|-------|-----------------|---------|------|
| **Free** | $0 | 50 | No | — |
| **Starter** | $20/mo | 500 | Yes | $0.05/credit |
| **Pro** | $100/mo | 3,000 | Yes | $0.04/credit |
| **Team** | $200/mo | 7,500 | Yes | $0.033/credit |

### What Can You Do With Credits?

| Credits | Approximate Usage |
|---------|-------------------|
| 50 (Free) | ~15 Claude Haiku conversations |
| 500 (Starter) | ~100 GPT-4o queries or ~160 Gemini Flash |
| 3,000 (Pro) | ~600 Claude Sonnet or ~1,000 GPT-4o |
| 7,500 (Team) | ~1,500 Claude Sonnet or ~2,500 GPT-4o |

## Model Pricing Reference

All prices are per **million tokens** from Vercel AI Gateway. See [full test results](/test-results.html) for complete capability matrix.

### Budget Tier (< $1/M combined)

| Model | Provider | Input $/M | Output $/M | Credits/1K tokens* |
|-------|----------|-----------|------------|-------------------|
| Gemini 2.5 Flash Lite | Google | $0.10 | $0.40 | 0.08 |
| GPT-4o Mini | OpenAI | $0.15 | $0.60 | 0.12 |

### Mid Tier ($1-5/M combined)

| Model | Provider | Input $/M | Output $/M | Credits/1K tokens* |
|-------|----------|-----------|------------|-------------------|
| Morph V3 Fast | Morph | $0.80 | $1.20 | 0.32 |
| Morph V3 Large | Morph | $0.90 | $1.90 | 0.45 |
| Perplexity Sonar | Perplexity | $1.00 | $1.00 | 0.32 |
| GPT-5.1 Codex Mini | OpenAI | $0.25 | $2.00 | 0.36 |
| Gemini 2.5 Flash | Google | $0.30 | $2.50 | 0.45 |
| Gemini 3 Flash | Google | $0.50 | $3.00 | 0.56 |

### Premium Tier ($5-15/M combined)

| Model | Provider | Input $/M | Output $/M | Credits/1K tokens* |
|-------|----------|-----------|------------|-------------------|
| Claude 4.5 Haiku | Anthropic | $1.00 | $5.00 | 0.96 |
| Perplexity Sonar Reasoning Pro | Perplexity | $2.00 | $8.00 | 1.60 |
| GPT-5 Chat | OpenAI | $1.25 | $10.00 | 1.80 |
| GPT-5.1 Thinking | OpenAI | $1.25 | $10.00 | 1.80 |
| Gemini 2.5 Pro | Google | $1.25 | $10.00 | 1.80 |
| GPT-4o | OpenAI | $2.50 | $10.00 | 2.00 |
| Gemini 3 Pro Preview | Google | $2.00 | $12.00 | 2.24 |

### Flagship Tier ($18+/M combined)

| Model | Provider | Input $/M | Output $/M | Credits/1K tokens* |
|-------|----------|-----------|------------|-------------------|
| Claude 4.5 Sonnet | Anthropic | $3.00 | $15.00 | 2.88 |
| Perplexity Sonar Pro | Perplexity | $3.00 | $15.00 | 2.88 |
| Claude 4.5 Opus | Anthropic | $5.00 | $25.00 | 4.80 |

\* Credits calculated with 60% default margin, assuming equal input/output tokens.

**Total: 23 language models** across 5 providers (Anthropic, OpenAI, Google, Perplexity, Morph)

## Image Generation Pricing

Two Gemini models support native image generation through the standard API:

| Model | Provider | Input $/M | Output $/M | Notes |
|-------|----------|-----------|------------|-------|
| Gemini 2.5 Flash Image | Google | $0.30 | $2.50 | Returns images in `result.files[]` |
| Gemini 3 Pro Image | Google | $2.00 | $120.00 | High-quality generation, higher output cost |

**Note:** Standalone image generation models (Flux, Imagen) are documented but not currently available through the Layers API. Use Gemini multimodal models for image generation.

## Code Examples

### Calculate Credits

```typescript
import { calculateCredits, getCostBreakdown } from '@layers/credits';

// Simple calculation
const credits = calculateCredits(
  'anthropic/claude-sonnet-4.5',
  1000,  // input tokens
  500    // output tokens
);
console.log(`Cost: ${credits} credits`);

// Full breakdown
const breakdown = getCostBreakdown(
  'anthropic/claude-sonnet-4.5',
  1000,
  500
);
console.log(breakdown);
// {
//   inputCost: 0.003,
//   outputCost: 0.0075,
//   totalCost: 0.0105,
//   marginPercent: 60,
//   credits: 1.68,
//   revenue: 0.0168,
//   profit: 0.0063
// }
```

### Estimate Before Request

```typescript
import { estimateCredits } from '@layers/credits';

// Check cost before making a request
const estimated = estimateCredits(
  'openai/gpt-4o',
  2000,  // estimated input
  1000   // estimated output
);

if (userBalance >= estimated) {
  // Proceed with request
}
```

### Custom Margin Configuration

```typescript
import { calculateCredits, type MarginConfig } from '@layers/credits';

const customMargin: MarginConfig = {
  defaultMarginPercent: 40,  // Lower default
  modelOverrides: {
    'anthropic/claude-opus-4.5': 80,  // Higher for expensive models
    'openai/gpt-4o-mini': 30,         // Lower for budget models
  }
};

const credits = calculateCredits(
  'anthropic/claude-sonnet-4.5',
  1000,
  500,
  customMargin
);
```

### Batch Calculations

```typescript
import { calculateBatchCredits } from '@layers/credits';

const requests = [
  { modelId: 'anthropic/claude-sonnet-4.5', inputTokens: 1000, outputTokens: 500 },
  { modelId: 'openai/gpt-4o', inputTokens: 2000, outputTokens: 1000 },
  { modelId: 'google/gemini-2.5-flash', inputTokens: 500, outputTokens: 200 },
];

const totalCredits = calculateBatchCredits(requests);
```

## API Reference

The `@layers/credits` package exports these functions (see source code for full TypeScript types):

| Function | Description |
|----------|-------------|
| `calculateCredits(modelId, inputTokens, outputTokens, margin?)` | Calculate credits for a request |
| `getCostBreakdown(modelId, inputTokens, outputTokens, margin?)` | Full cost breakdown with profit |
| `estimateCredits(modelId, estimatedInput, estimatedOutput)` | Pre-request cost estimation |
| `creditsToUsd(credits)` | Convert credits to USD value |
| `usdToCredits(usd)` | Convert USD to credits |
| `calculateBatchCredits(requests)` | Calculate total for multiple requests |

### Types

| Type | Description |
|------|-------------|
| `MarginConfig` | Custom margin settings per model |
| `SubscriptionTier` | Tier definition (name, price, credits, overage rate) |
| `CostBreakdown` | Full breakdown with input/output costs, margin, profit |

> **Note:** Full API documentation with TypeDoc auto-generation is planned (MFDR-008). For now, see the [source code](https://github.com/mirror-factory/layers-dev/tree/main/packages/@layers/credits/src).

## Next Steps

- [Model Selection Guide](/docs/models) - Choose the right model for your use case
- [Test Results Matrix](/test-results.html) - See all 23 models with capabilities
